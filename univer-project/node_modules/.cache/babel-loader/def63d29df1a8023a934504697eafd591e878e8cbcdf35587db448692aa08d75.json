{"ast":null,"code":"import'bootstrap/dist/css/bootstrap.min.css';import\"../Styles/MainStyle.css\";import\"../Styles/form.css\";import Loading from'./loading';import React,{useEffect,useState,useRef}from'react';import{connect,useDispatch}from'react-redux';import{fetchUsers,validateUser}from'../redux/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FormContent(props){const fio=useRef();const email=useRef();const tel=useRef();const comment=useRef();const dispatch=useDispatch();const[checked,setCheck]=useState(false);useEffect(()=>{setInputValues();validate();},[]);function ClearInputs(){fio.current.value='';email.current.value='';tel.current.value='';comment.current.value='';}function onSubmit(e){e.preventDefault();dispatch(fetchUsers());ClearInputs();}function setInputValues(){if(localStorage.user!=null){let data=JSON.parse(localStorage.user);fio.current.value=data.fio;email.current.value=data.email;tel.current.value=data.tel;comment.current.value=data.comment;}}function safeToLocalStorage(){localStorage.user=JSON.stringify({fio:fio.current.value,tel:tel.current.value,email:email.current.value,comment:comment.current.value});validate();}function validate(){dispatch(validateUser());}return/*#__PURE__*/_jsxs(\"div\",{children:[props.loadingProgress&&/*#__PURE__*/_jsx(\"div\",{class:\"loading-container\",children:/*#__PURE__*/_jsx(Loading,{})}),!props.loadingProgress&&/*#__PURE__*/_jsxs(\"form\",{action:\"https://formcarry.com/s/fCsjmrtmZ4\",method:\"POST\",\"accept-charset\":\"UTF-8\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:fio,onChange:()=>{safeToLocalStorage();},class:\"form-control\",id:\"name\",placeholder:\"\\u0412\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\"}),props.nameError!=\"\"&&/*#__PURE__*/_jsx(\"div\",{class:\"invalid\",children:props.nameError})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",for:\"phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",ref:tel,onChange:()=>{safeToLocalStorage();},class:\"form-control\",id:\"phone\",placeholder:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"}),props.telError!=\"\"&&/*#__PURE__*/_jsx(\"div\",{class:\"invalid\",children:props.telError})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",ref:email,onChange:()=>{safeToLocalStorage();},class:\"form-control\",id:\"email\",placeholder:\"E-mail\"}),props.emailError!=\"\"&&/*#__PURE__*/_jsx(\"div\",{class:\"invalid\",children:props.emailError})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"comment\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"6\",type:\"text\",ref:comment,onChange:()=>{safeToLocalStorage();},class:\"form-control\",id:\"comment\",placeholder:\"\\u0412\\u0430\\u0448 \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"}),props.commentError!=\"\"&&/*#__PURE__*/_jsx(\"div\",{class:\"invalid\",children:props.commentError})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",onChange:()=>{setCheck(!checked);validate();},checked:checked,id:\"agree\",required:true}),/*#__PURE__*/_jsx(\"label\",{class:\"form-check-label\",for:\"agree\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u044F\\u044F \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443, \\u044F \\u0434\\u0430\\u044E \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u0441\\u0432\\u043E\\u0438\\u0445 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!(props.nameError==\"\")||!(props.telError==\"\")||!(props.emailError==\"\")||!(props.commentError==\"\")||!checked,onClick:e=>onSubmit(e),class:\"form-button\",children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443!\"})]})]});}const mapStateToProps=state=>{return{loadingProgress:state.user.loading,correctData:state.user.correctValidation,nameError:state.user.nameError,emailError:state.user.emailError,telError:state.user.telError,commentError:state.user.commentError};};export default connect(mapStateToProps)(FormContent);","map":{"version":3,"names":["Loading","React","useEffect","useState","useRef","connect","useDispatch","fetchUsers","validateUser","jsx","_jsx","jsxs","_jsxs","FormContent","props","fio","email","tel","comment","dispatch","checked","setCheck","setInputValues","validate","ClearInputs","current","value","onSubmit","e","preventDefault","localStorage","user","data","JSON","parse","safeToLocalStorage","stringify","children","loadingProgress","class","action","method","for","type","ref","onChange","id","placeholder","nameError","htmlFor","telError","emailError","rows","commentError","required","disabled","onClick","mapStateToProps","state","loading","correctData","correctValidation"],"sources":["E:/web/WebProject/univer-project/src/Components/formContent.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css'\r\nimport \"../Styles/MainStyle.css\"\r\nimport \"../Styles/form.css\"\r\nimport Loading from './loading'\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { connect, useDispatch} from 'react-redux'\r\nimport { fetchUsers, validateUser } from '../redux/userActions'\r\n\r\nfunction FormContent(props) {\r\n\r\n    const fio = useRef()\r\n    const email= useRef()\r\n    const tel = useRef()\r\n    const comment = useRef()\r\n\r\n    const dispatch = useDispatch();\r\n    const [checked, setCheck] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setInputValues();\r\n        validate();\r\n    }, []);\r\n\r\n    function ClearInputs()\r\n    {\r\n        fio.current.value = '';\r\n        email.current.value = '';\r\n        tel.current.value = '';\r\n        comment.current.value = '';\r\n    }\r\n\r\n    function onSubmit(e){\r\n\r\n        e.preventDefault();\r\n\r\n        dispatch(fetchUsers());\r\n        ClearInputs();\r\n    } \r\n\r\n    function setInputValues()\r\n    {\r\n        if(localStorage.user != null)\r\n        {\r\n            let data = JSON.parse(localStorage.user);\r\n            fio.current.value = data.fio;\r\n            email.current.value = data.email;\r\n            tel.current.value = data.tel;\r\n            comment.current.value = data.comment;\r\n        }\r\n    }\r\n\r\n    function safeToLocalStorage()\r\n    {\r\n        localStorage.user = JSON.stringify({fio: fio.current.value, tel: tel.current.value, email: email.current.value, comment: comment.current.value,});\r\n        validate();\r\n    }\r\n\r\n    function validate()\r\n    {\r\n        dispatch(validateUser());\r\n    }\r\n\r\n  return (\r\n<div>\r\n    { props.loadingProgress && \r\n        <div class=\"loading-container\">\r\n            <Loading/>\r\n        </div>\r\n    }\r\n    { !props.loadingProgress &&\r\n        <form action=\"https://formcarry.com/s/fCsjmrtmZ4\" method=\"POST\" accept-charset=\"UTF-8\" >\r\n            <div class=\"form-group\">\r\n                <label for=\"name\"></label>\r\n                <input type=\"text\" ref={fio} onChange={()=>{safeToLocalStorage();}} class=\"form-control\" id=\"name\" placeholder=\"Ваше имя\"/>\r\n                {props.nameError!=\"\" && \r\n                <div class=\"invalid\">\r\n                    {props.nameError}\r\n                </div>}\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label htmlFor=\"phone\" for=\"phone\"></label>\r\n                <input type=\"tel\" ref={tel} onChange={() => { safeToLocalStorage(); }} class=\"form-control\" id=\"phone\"  placeholder=\"Телефон\"/>\r\n                {props.telError!=\"\" && \r\n                <div class=\"invalid\">\r\n                    {props.telError}\r\n                </div>}\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label for=\"email\"></label>\r\n                <input type=\"email\" ref={email} onChange={() => { safeToLocalStorage();}} class=\"form-control\" id=\"email\" placeholder=\"E-mail\"/>\r\n                {props.emailError!=\"\" && \r\n                <div class=\"invalid\">\r\n                    {props.emailError}\r\n                </div>}\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label for=\"comment\"></label>\r\n                <textarea rows=\"6\" type=\"text\" ref={comment} onChange={() => { safeToLocalStorage();}} class=\"form-control\" id=\"comment\" placeholder=\"Ваш комментарий\"/>\r\n                {props.commentError != \"\" && \r\n                <div class=\"invalid\">\r\n                    {props.commentError}\r\n                </div>}\r\n            </div>\r\n            <div class=\"form-check\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" onChange={() => {setCheck(!checked); validate();}} checked={checked} id=\"agree\" required/>\r\n                <label class=\"form-check-label\" for=\"agree\">\r\n                    Отправляя заявку, я даю согласие на обработку своих персональных данных\r\n                </label>\r\n            </div>\r\n            <button type=\"submit\" disabled={(!(props.nameError == \"\") || !(props.telError == \"\") || !(props.emailError == \"\") || !(props.commentError == \"\") || !checked)} onClick={(e) => onSubmit(e)} class=\"form-button\">Оставить заявку!</button>    \r\n        </form>\r\n    }\r\n</div>\r\n    \r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        loadingProgress: state.user.loading,\r\n        correctData: state.user.correctValidation,\r\n        nameError: state.user.nameError,\r\n        emailError: state.user.emailError,\r\n        telError: state.user.telError,\r\n        commentError: state.user.commentError,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(FormContent);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}