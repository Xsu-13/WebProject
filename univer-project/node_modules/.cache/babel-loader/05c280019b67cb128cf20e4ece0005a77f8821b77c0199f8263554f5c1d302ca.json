{"ast":null,"code":"import{COMMENT_USER_ERROR,DATA_USER_CORRECT,EMAIL_USER_ERROR,FETCH_USER_FAILURE,FETCH_USER_REQUEST,FETCH_USER_SUCCESS,NAME_USER_ERROR,TEL_USER_ERROR}from\"./userTypes\";export const fetchUsersRequest=()=>{console.log(FETCH_USER_REQUEST);return{type:FETCH_USER_REQUEST};};export const fetchUsersSuccess=()=>{console.log(FETCH_USER_SUCCESS);return{type:FETCH_USER_SUCCESS};};export const fetchUsersFailure=()=>{console.log(FETCH_USER_FAILURE);return{type:FETCH_USER_FAILURE};};export const emailError=()=>{return{type:EMAIL_USER_ERROR};};export const telError=()=>{return{type:TEL_USER_ERROR};};export const nameError=()=>{return{type:NAME_USER_ERROR};};export const commentError=()=>{return{type:COMMENT_USER_ERROR};};export const correctValidation=()=>{return{type:DATA_USER_CORRECT};};export const fetchUsers=()=>{return dispatch=>{dispatch(fetchUsersRequest());fetch('https://formcarry.com/s/fCsjmrtmZ4',{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:localStorage.user}).then(response=>{console.log(response);dispatch(fetchUsersSuccess());localStorage.clear();}).catch(error=>{console.log(error);dispatch(fetchUsersFailure());});};};export const validateUser=()=>{return dispatch=>{if(localStorage.user!=null){let data=JSON.parse(localStorage.user);const isEmail=str=>/^(.+)@(.+)\\.(.+)$/.test(str);const isMobilePhone=str=>/^(\\+?7|8)?9\\d{9}$/.test(str);const isAlpha=str=>/^[A-ZА-ЯЁ]+$/i.test(str);const emailValidation=isEmail(data.email);const telValidation=isMobilePhone(data.tel);const nameValidation=isAlpha(data.fio);if(data.fio===\"\"||!nameValidation){dispatch(nameError());return;}if(!telValidation||data.tel===\"\"){dispatch(telError());return;}if(!emailValidation||data.email===\"\"){dispatch(emailError());return;}if(data.comment===\"\"){dispatch(commentError());return;}dispatch(correctValidation());}};};","map":{"version":3,"names":["COMMENT_USER_ERROR","DATA_USER_CORRECT","EMAIL_USER_ERROR","FETCH_USER_FAILURE","FETCH_USER_REQUEST","FETCH_USER_SUCCESS","NAME_USER_ERROR","TEL_USER_ERROR","fetchUsersRequest","console","log","type","fetchUsersSuccess","fetchUsersFailure","emailError","telError","nameError","commentError","correctValidation","fetchUsers","dispatch","fetch","method","headers","body","localStorage","user","then","response","clear","catch","error","validateUser","data","JSON","parse","isEmail","str","test","isMobilePhone","isAlpha","emailValidation","email","telValidation","tel","nameValidation","fio","comment"],"sources":["E:/web/WebProject/univer-project/src/redux/userActions.js"],"sourcesContent":["import { COMMENT_USER_ERROR, DATA_USER_CORRECT, EMAIL_USER_ERROR, FETCH_USER_FAILURE, FETCH_USER_REQUEST, FETCH_USER_SUCCESS, NAME_USER_ERROR, TEL_USER_ERROR } from \"./userTypes\"\r\n\r\nexport const fetchUsersRequest = () => {\r\n    console.log(FETCH_USER_REQUEST)\r\n    return {\r\n        type: FETCH_USER_REQUEST\r\n    }\r\n}\r\n\r\nexport const fetchUsersSuccess = () => {\r\n    console.log(FETCH_USER_SUCCESS)\r\n    return {\r\n        type: FETCH_USER_SUCCESS\r\n    }\r\n}\r\n\r\nexport const fetchUsersFailure = () => {\r\n    console.log(FETCH_USER_FAILURE)\r\n    return {\r\n        type: FETCH_USER_FAILURE\r\n    }\r\n}\r\n\r\nexport const emailError = () => {\r\n\r\n    return {\r\n        type: EMAIL_USER_ERROR\r\n    }\r\n}\r\n\r\nexport const telError = () => {\r\n\r\n    return {\r\n        type: TEL_USER_ERROR\r\n    }\r\n}\r\n\r\nexport const nameError = () => {\r\n\r\n    return {\r\n        type: NAME_USER_ERROR\r\n    }\r\n}\r\n\r\nexport const commentError = () => {\r\n\r\n    return {\r\n        type: COMMENT_USER_ERROR\r\n    }\r\n}\r\n\r\nexport const correctValidation = () => {\r\n\r\n    return {\r\n        type: DATA_USER_CORRECT\r\n    }\r\n}\r\n\r\nexport const fetchUsers = () =>\r\n{\r\n    return (dispatch) => {\r\n        \r\n        dispatch(fetchUsersRequest())\r\n\r\n        fetch('https://formcarry.com/s/fCsjmrtmZ4', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json', 'Accept': 'application/json'},\r\n        body: localStorage.user\r\n        })\r\n        .then(response => {\r\n            console.log(response);\r\n            dispatch(fetchUsersSuccess());\r\n            localStorage.clear();})\r\n        .catch(error => {\r\n            console.log(error);\r\n            dispatch(fetchUsersFailure());\r\n            });\r\n    }\r\n}\r\n\r\nexport const validateUser = () =>\r\n{\r\n    return (dispatch) => {\r\n\r\n        if(localStorage.user != null)\r\n        {\r\n            let data = JSON.parse(localStorage.user);\r\n\r\n        const isEmail = (str) => /^(.+)@(.+)\\.(.+)$/.test(str);\r\n        const isMobilePhone = (str) => /^(\\+?7|8)?9\\d{9}$/.test(str);\r\n        const isAlpha = (str) => /^[A-ZА-ЯЁ]+$/i.test(str)\r\n\r\n        const emailValidation = isEmail(data.email);\r\n        const telValidation = isMobilePhone(data.tel);\r\n        const nameValidation = isAlpha(data.fio);\r\n\r\n\r\n        if(data.fio === \"\" || !nameValidation)\r\n        {\r\n            dispatch(nameError()); \r\n            return;\r\n        }\r\n        if(!telValidation || data.tel === \"\")\r\n        {\r\n            dispatch(telError()); \r\n            return;\r\n        }\r\n\r\n        if(!emailValidation || data.email === \"\")\r\n        {\r\n            dispatch(emailError()); \r\n            return;\r\n        }\r\n\r\n        if(data.comment === \"\")\r\n        {\r\n            dispatch(commentError()); \r\n            return;\r\n        }\r\n\r\n        dispatch(correctValidation())\r\n        }\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}